2
The Foundation of React
React is a JavaScript library for creating interactive user interfaces using components. It was
created by Facebook in 2011 for use on Facebook’s newsfeed and on Instagram. In 2013, the
first version of React was released to the public as open source software. Today, it’s used by
many of the largest websites and mobile apps, including Facebook, Instagram, Netflix, Reddit,
Dropbox, Airbnb, and thousands of others.
Writing user interfaces with React requires a bit of a shift in how you think about web applica-
tions. You need to understand what React is, how it works at a higher level, and the computer
science ideas and patterns that it’s based on. In this chapter, you’ll learn:
➤➤ Why it’s called React.
➤➤ What a Virtual DOM does.
➤➤ The difference between composition and inheritance.
➤➤ The difference between declarative and imperative programming.
➤➤ The meaning of “idiomatic” with regard to React.
WHAT’S IN A NAME?
Let’s start with the name “React.” Facebook designed React in response to its need to be able
to efficiently update websites in response to events. Events that can trigger updates in websites
include user input, new data coming into the application from other websites and data sources,
and data coming into the application from sensors (such as location data from GPS chips).
Traditionally, the way that web applications have dealt with data that changes over time is to
refresh themselves every so often, checking for new data in the process. Facebook wanted to
create a way to more easily build applications that respond, or react to new data, rather than
12 ❘ CHAPTER 2 The FoundaTion oF ReacT
simply refreshing pages whether the underlying data has changed or not. You can think of the differ-
ence in approaches as pull (which is the traditional way of updating websites) vs. push (which is the
reactive way to build websites).
This method of updating a user interface in response to data changes is called reactive programming.
UI LAYER
Web applications typically are built and described using the Model- View- Controller (MVC) pattern.
The Model in MVC is the data layer, the Controller facilitates communication with the data layer,
and the View is what the user sees and interacts with. In an MVC application, the View sends input to
the Controller, which passes data between the data layer and the View. React is only concerned with
the V in MVC. It takes data as input and presents it to the user in some form.
Figure 2-1 shows a diagram of the MVC pattern.
MODEL
updates modifies
user input
VIEW CONTROLLER
FIGURE 2- 1: The MVC pattern
React itself doesn’t care whether the user is using a mobile phone, a tablet, a desktop web browser, a
screen reader, a command-l ine interface, or any other kind of device or interface that may be invented
in the future. React just renders components. How those components get presented to the user is up
to a separate library.
The library that handles rendering of React components in web browsers is called ReactDOM. If you
want to render React elements to native mobile apps, you use React Native. If you want to render
React components to static HTML, you can use ReactDOMServer.
ReactDOM has a number of functions for interfacing between React and web browsers, but the one
that every React application makes use of is called ReactDOM.render. Figure 2-2 illustrates the rela-
tionship between React, ReactDOM, and a web browser.
React React.render() Virtual ReactDOM.render() <div id="app">
DOM
Component DOM </div>
FIGURE 2- 2: React and ReactDOM
Virtual DOM ❘ 13
ReactDOM is what makes it possible for user interfaces built in React to handle the quantity of
screen changes required by modern web applications so efficiently. It does this through the use of a
Virtual DOM.
VIRTUAL DOM
The Document Object Model, or DOM, is a web browser’s internal representation of a web page. It
converts HTML, styles, and content into nodes that can be operated on using JavaScript.
If you’ve ever used the getElementById function or set the innerHTML of an element, you’ve inter-
acted with the DOM using JavaScript. Changes to the DOM cause changes to what you see in your
web browser, and updates made in the web browser (such as when you enter data into a form) cause
changes to the DOM.
Compared to other kinds of JavaScript code, DOM manipulation is slow and inefficient. This is
because whenever the DOM changes, the browser has to check whether the change will require the
page to be redrawn and then the redrawing has to happen.
Adding to the difficulty of DOM manipulation is that the DOM’s functions aren’t always easy to use
and some of them have excessively long names like Document.getElementsByClassName. For both
of these reasons, many different JavaScript DOM manipulation libraries have been created. The single
most popular and widely used DOM manipulation library of all time was jQuery. It gave web devel-
opers an easy way to make updates to the DOM, and that changed the way we build user interfaces
on the web.
Although jQuery made DOM manipulation easier, it left it up to programmers to program specifically
when and how changes to the DOM would happen. The result was often inefficient user interfaces
that were slower both to download and to respond to user interactions because of their use of jQuery.
As a result, jQuery got a reputation for being slow.
When the engineers at Facebook designed React, they decided to take the details of how and when
the DOM is modified out of the hands of programmers. To do this, they created a layer between
the code that the programmer writes and the DOM. They called this intermediary layer the
Virtual DOM.
Here’s how it works:
1. A programmer writes React code to render a user interface, which results in a single React
element being returned.
2. ReactDOM’s render method creates a lightweight and simplified representation of the React
element in memory (this is the Virtual DOM).
3. ReactDOM listens for events that require changes to the web page.
4. The ReactDOM.render method creates a new in-m emory representation of the web page.
14 ❘ CHAPTER 2 The FoundaTion oF ReacT
5. The ReactDOM library compares the new Virtual DOM representation of the web page to
the previous Virtual DOM representation and calculates the difference between the two. This
process is called reconciliation.
6. ReactDOM applies just the minimal set of changes to the browser DOM in the most efficient
way that it can and using the most efficient batching and timing of changes.
By taking the programmer out of the process of actually making updates to the browser DOM,
ReactDOM can decide on optimal timing and the optimal method for making required updates. This
greatly improves the efficiency of making updates to a browser view.
Figure 2-3 is a diagram showing how the Virtual DOM works.
Previous DOM Next DOM
Diff (erence)
DOM
FIGURE 2- 3: How the Virtual DOM works
THE PHILOSOPHY OF REACT
If you’ve used other JavaScript libraries, you may find React to be quite a bit different from your past
experience with programming dynamic user interfaces. By understanding the thinking behind why
React is like it is, you’ll have a better understanding and appreciation of it.
The Philosophy of React ❘ 15
Thinking in Components
React is a library for creating and putting together (or composing) components to build user
interfaces. React components are independent pieces that can be reused and that can pass data to
each other.
A component can be something as simple as a button or it can be more complex, such as a navigation
bar that’s made up of a collection of buttons and dropdowns.
As the programmer, it’s your job to decide how big or how small each component in your application
should be, but a good rule of thumb to think about is the idea of single responsibility.
The single responsibility principle, in programming, is the idea that a component should have respon-
sibility for a single part of a program’s functionality. Robert C. Martin, also known as “Uncle Bob,” is
one of the most important thinkers and writers on software design. He described the single responsi-
bility principle this way:
Single Responsibility means that a class [or what we call a “component” in React]
should have only one reason to change.
Composition vs. Inheritance
In object- oriented programming (OOP), it’s common to create variations of classes that inherit prop-
erties from a parent class. For example, a program might have a class called Button, which might
have a child class called SubmitButton. SubmitButton would inherit all of the properties of Button,
and then override or extend them to create its unique functionality and look.
Rather than using inheritance to create more specific components to deal with specific cases (such as
a submit button), React encourages the creation of a single component that is more broadly reusable
but that can be configured by passing data into it and then combining it with other components to
handle more specific cases.
For example, in the case of a submit button, you might simply pass a parameter to a Button compo-
nent called label and another parameter called handleClick that contains the action to be per-
formed by the button. This generalized button can then serve multiple purposes, depending on the
values of label and handleClick that are passed to it. Listing 2-1 shows what this component might
look like.
LISTING 2- 1: Creating configurable components
function Button(props){
return(
<button onClick={props.handleClick}>{props.label}</button>
);
}
Once you’ve created a configurable component, you can create more specific components by com-
bining more generalized ones. This technique is called composition. Listing 2-2 shows how you can
create a specific WelcomeDialog component from a general Dialog one using composition.
16 ❘ CHAPTER 2 The FoundaTion oF ReacT
LISTING 2- 2: Using composition
function Dialog(props){
return(
<div className="dialogStyle">{props.message}</div>
)
}
function WelcomeDialog(props){
return(
<Dialog message="Welcome to our app!" />
)
}
React Is Declarative
One way to describe the difference in approach between programming with React and programming
with many other JavaScript libraries is to say that React is declarative while many other libraries are
imperative.
So, what is declarative programming? Traditionally, the job of a programmer has been to break down
complex processes into steps so that a computer can perform them. For example, if you want to pro-
gram a robot to make you a sandwich, you might start by figuring out the high- level steps involved in
the process:
1. Get two slices of bread.
2. Find a knife.
3. Get the peanut butter.
4. Use the knife to spread the peanut butter.
5. Assemble the sandwich.
Of course, these steps are far too high- level for a robot to perform, so you need to break down each
one into smaller steps:
1. Get two slices of bread.
1a. Use visual sensors to locate bread.
1aa. If bread is found, move toward it.
1ab. If bread is not found, return to step 1.
1b. Use grabber arm to attempt opening of bread package.
You get the idea. By breaking down a complex process into small steps, a task eventually becomes
simple enough for a computer to perform. We call this step- by- step style of programming imperative
programming. The imperative approach is the way that most DOM manipulation libraries worked
prior to React.
The Philosophy of React ❘ 17
To change a paragraph of text in the browser using jQuery, for example, you would do something
like this:
$('#para1').html('<p>This is the new paragraph.</p>');
This code looks for a paragraph with the id attribute equal to para1 and changes its HTML content
to the new content that’s specified inside the parentheses.
React takes a different approach, which we call declarative programming. In declarative program-
ming, the computer (or the computer language interpreter, rather) has some intelligence about the
types of tasks that it can perform, and the programmer only needs to tell it what to do, rather than
how to do it.
In declarative programming, our sandwich- making robot would know the steps for making sand-
wiches, and programming it would involve the programmer saying something like “make me a sand-
wich that looks like this.”
Applied to DOM manipulation, the declarative approach that React takes is to allow the programmer
to say, “Make the page look like this.” React then compares the new way that the page should look
with the way that it currently looks and figures out what’s different and what needs to change and
how to do it.
Building and updating a React user interface, from the programmer’s perspective, is just a matter of
specifying what the user interface should look like and telling React to render it.
React Is Idiomatic
React itself is a small library with limited functionality when compared to other JavaScript libraries.
Except for a handful of concepts and methods that are unique to React, React components are just
JavaScript. If the structure and code of a React component looks foreign to you, it’s likely because it
uses a style of JavaScript programming that you’re not yet familiar with, or because it makes use of a
new feature in JavaScript that you’re not yet familiar with. The good news is that by getting better at
JavaScript, you’ll get better at programming with React.
You may hear the term “idiomatic JavaScript” used to describe React. What this means is that React
code is easily understandable to people who program JavaScript. The reverse is also true: if you know
JavaScript, understanding how to write React is not too much of a stretch.
Why Learn React?
If you’ve made it this far in the book, you probably already have your own reasons for learning
React. You already know by now that you’re in good company—R eact’s popularity has been growing
from day one of its release into the wild. Surveys of developers have consistently shown that it’s at
the top, or very near the top, of their preferred libraries, and the list of companies that have already
migrated to React or that are in the process of migrating to React is impressive, to say the least.
React is going to be around for a long time to come, and there’s never been a better time to learn it.
18 ❘ CHAPTER 2 The FoundaTion oF ReacT
React vs.…
The job of being a software developer today, especially one working with JavaScript and the web,
requires some knowledge of a staggeringly large and growing number of libraries, frameworks,
protocols, standards, best practices, and patterns. A great programmer not only knows how to apply
whatever language and framework they are working in at any one time, but also how to quickly learn
new languages and frameworks.
One good way to learn a new language is by comparing it to something that you already know, and
the question “how does React compare to (x)” is one of the most common questions that my students
ask me. In the following sections, I’ll look at how React stacks up against its two closest rivals: Angu-
lar and Vue. While I don’t like to take sides, I know enough about each to be able to give some facts
and impressions.
React vs. Angular
Angular (angular.io) was created by Google, and it’s been around longer than React in one form or
another. Let’s start with the similarities:
1. Purpose. Both Angular and React can create scalable and dynamic user interfaces.
2. Stability. Both Angular and React were created by one of the largest companies on the inter-
net and they both have huge numbers of developers and enthusiasts.
3. Robustness. A major concern with any JavaScript library or framework is how safe, secure,
and generally acceptable it is for enterprise development. Both Angular and React are popu-
lar and widely used in corporate software development.
4. License. Both frameworks use the MIT license, which allows for unlimited use and reuse
for free as long as the original copyright and license notices are included in any copy of the
source code.
Angular has gone through some major changes in the years since React came onto the scene. Prior
to what we now call “Angular” there was AngularJS, which was replaced in 2016 with Angular 2.0.
Angular 2.0 was a major change and was not compatible with AngularJS. Its introduction led to
many developers deciding to learn React instead of the rewritten Angular.
Angular is considered to be a “framework,” while React calls itself a “library.” The difference between
a library and a framework is that a framework is usually an all- encompassing way of doing some-
thing, while a library is generally seen as a tool for a more specific purpose.
The React library itself is a tool for making user interfaces out of components. Angular, on the other
hand, is a complete system for building front- end web applications. By assembling components and
libraries, React can do everything that Angular can do. But, if you need something smaller, such as to
generate some HTML, React can do that as well.
The Philosophy of React ❘ 19
Angular has a steeper learning curve than React. In addition to the learning curve required to use the
framework itself, Angular requires the use of Microsoft’s TypeScript, which is a superset of JavaScript
that’s designed for the development of large applications. It’s possible to use TypeScript to write React
as well, but with Angular it’s a requirement.
Unlike React, Angular operates on the real DOM, rather than on a Virtual DOM, and it optimizes
changes to the DOM by using an approach it calls Change Detection. When an event causes data
changes in Angular, the framework checks each component and updates it as needed. You may recog-
nize this approach as a more imperative approach (as compared to React’s declarative approach) to
DOM manipulation.
React and Angular also differ in how data flows within an application. React, as you’ll see, uses
one- way data flow. What this means is that every change that happens in the browser starts out as a
change in the data model. This differs from both Angular and Vue, which both feature two-way data
binding, in which changes in the browser can affect the data model directly and changes to the data
model can affect the view.
React vs. Vue
Vue.js (vuejs.org) is a relative newcomer to the universe of JavaScript frameworks, but it has been
growing in popularity and is now considered one of the top three, along with React and Angular.
Like React and Angular, Vue is open source. Unlike React and Angular, however, Vue isn’t backed or
controlled by a large corporation. Instead, it’s the work of many programmers and companies donat-
ing their skills to maintain and support it. This can be seen as either a plus or a minus, depending on
your view of giant internet companies.
Vue takes a middle ground between the bare-bones approach of React and the smorgasbord approach
of Angular. Like Angular, it has built-i n functionality for state management, routing, and managing
CSS. But, like React, it’s a small library (even smaller than React in terms of total kilobytes that must
be downloaded to the browser) and how you use it is highly customizable.
Of the three libraries, Vue is probably the easiest to learn.
What React Is Not
It’s important to keep in mind not only what React is, but what it isn’t. Beyond the often repeated
(and largely semantic) argument about whether React is a library or a framework are the more
important distinctions between front-e nd libraries, back- end libraries, and the development
environment.
React, as it’s used most often, is a front-e nd library. This means that everything React does happens in
the web browser. It can’t directly control or access remote databases (except through the web), and it
doesn’t serve web pages.
When I’m asked about the differences between front- end, back- end, and development environments
in my classes, I like to draw something like the diagram in Figure 2-4.
20 ❘ CHAPTER 2 The FoundaTion oF ReacT
Back End Front End
Device
Browser
window
requests Browser Window
index.html
HTTP
Node.js index.html
Data Server
Document
HTML
JavaScript JavaScript
requests
data
React
CSS
FIGURE 2- 4: How the web works
You know already that React is a front- end JavaScript library. As you can see from the preced-
ing diagram, there are many other pieces of the web ecosystem. Here are a few of the things that
React is not.
React Is Not a Web Server
A web server, also known as an HTTP server, has as its primary job to accept requests for web pages
from web browsers and then return those web pages to the browser along with all of their linked
images, CSS files, and JavaScript files.
The React library and the user interfaces you create using React are among the linked JavaScript
files that a web server sends to a web browser, and React itself has no ability to handle requests from
web browsers, although it can interact with the browser, just as any JavaScript code can, through the
browser’s application programming interfaces (APIs).
React Is Not a Programming Language
React is a JavaScript library, which means that it is just a collection of JavaScript functions that pro-
grammers can make use of. The idea of a library is to simplify common tasks that programmers need
to do frequently so that they can just focus on writing the code that makes a program unique.
Summary ❘ 21
If you had enough time and knowledge, you could rewrite every bit of the React library yourself
using JavaScript— but, of course, there’s no reason to do that, because the React developers have done
it for you.
React Is Not a Database Server
React doesn’t have any abilities to store data in a secure way or in a permanent way. Instead, React
user interfaces (like every web and mobile web user interface) communicate with server-s ide data-
bases over the internet to store and receive data such as login information, ecommerce transaction
data, news feeds, and so forth.
The data that React uses to make user interfaces dynamic, and the data that you’re viewing at any
one time in a React user interface (what we call “session” data), is not persistent. Unless your React
user interface saves session data in the web browser (using cookies or the browser’s local storage), it
all gets erased when you navigate to a different URL or refresh your browser window.
React Is Not a Development Environment
As you saw in the book’s Introduction, you’ll use plenty of different tools to program with React.
Collectively, these are known as your development environment. I present the most commonly used
tools (and, in some cases, just my own personal preferences), but there’s nothing about React that
requires you to use these specific tools. In many cases, there are alternatives available, and you may
discover that you prefer different ones than I do (or, you may discover a better tool that I’m not cur-
rently aware of). It’s possible to write perfect React code using any tools you want, or using no tools
at all (other than a text editor).
React Is Not the Perfect Solution to Every Problem
React works well for many types of applications, but it’s not always the best solution. This is true of
any JavaScript library, and it’s probably true of every single tool ever invented. It’s important to know
about a wide variety of different languages and libraries so that you can make good choices and
know when the tools you prefer to use or that you know the best are the best and when they might
not be the best.
SUMMARY
Because React is a different way of writing user interfaces for the web, it does have some concepts
and foundational ideas behind it that are important to understand before you can work with it effec-
tively. In the end, however, writing React user interfaces is straightforward:
1. You write components to describe how the user interface should look and act.
2. React renders your components to create a tree of nodes.
3. A React renderer figures out the differences between the latest rendered component tree and
the previous one and updates the user interface accordingly.
22 ❘ CHAPTER 2 The FoundaTion oF ReacT
In this chapter, you learned:
➤➤ Why React is called React, and what is meant by the term “reactive programming.”
➤➤ The purposes of the React library and of the ReactDOM library.
➤➤ What composition is.
➤➤ About declarative programming and how it’s different from imperative programming.
➤➤ Why you should learn React.
➤➤ How React compares to Angular and Vue.js.
➤➤ The role of React in a web application and what roles React does not fill within the web
application ecosystem.
In the next chapter, you’ll learn about one of the most fundamental tools used to write React
components: JSX.
3
JSX
Newcomers to React often remark on how it appears that React breaks one of the cardinal
rules of web development, which is to not mix your programming logic with your HTML.
This chapter explains where this misperception about React comes from and introduces JSX,
which gives us an easy, HTML- like syntax for composing React components. In this chapter,
you’ll learn:
➤➤ How to write JSX.
➤➤ How modules work in JavaScript.
➤➤ What a transpiler does.
➤➤ How to include literal JavaScript in JSX code.
➤➤ How to do conditional rendering in React.
➤➤ How to render children in JSX.
JSX IS NOT HTML
Take a look first at Listing 3-1. If you know some HTML, you can probably guess what the
result of this function will be—a form containing two input fields and a button will be returned.
LISTING 3- 1: A React component
import React from "react";
function Login(){
const handleSubmit = (e)=>{
e.preventDefault();
console.log(`logging in ${e.target[0].value}`);
continues
